<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://looechao.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://looechao.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://looechao.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://looechao.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://looechao.github.io/css/light.css' />
    <link rel="stylesheet" href='https://looechao.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://looechao.github.io/css/syntax.css' />
    <title>Linux学习笔记-24年5月第一组 - looechao&#39;s blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/favicon.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="Linux基础知识-排版待整理" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://looechao.github.io/post/2024/linux-01/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Linux学习笔记-24年5月第一组 - looechao&#39;s blog" />
<meta name="twitter:description"
  content="Linux基础知识-排版待整理" />
<meta name="twitter:site" content="https://looechao.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://looechao.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="Linux学习笔记-24年5月第一组 - looechao&#39;s blog">
<meta property="og:description"
  content="Linux基础知识-排版待整理" />
<meta property="og:url" content="https://looechao.github.io/post/2024/linux-01/" />
<meta property="og:site_name" content="Linux学习笔记-24年5月第一组" />
<meta property="og:image"
  content="https://looechao.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2024-05-18 15:38:13 &#43;0800 CST" />











      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9W970VLJ6X"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9W970VLJ6X');
        }
      </script>


</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://looechao.github.io/">
        <svg width="32" height="32" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g filter="url(#filter0_d_87_7821)">
            <rect x="1" y="2" width="14" height="12" rx="0.5" fill="#283544"></rect>
          </g>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M8.6075 2H14.5774C14.7887 2 14.9472 2.14458 15 2.38554V13.6145C15 13.8072 14.7887 14 14.5774 14H9.71702C9.50566 13.3253 9.4 12.6506 9.29434 11.9759C10.5623 11.7349 11.7245 11.1566 12.517 10.2409C12.7811 9.85542 12.3057 9.61446 12.0943 9.85542C11.5132 10.7229 10.4038 11.253 9.24152 11.4458C9.08302 9.51807 9.24152 7.9759 9.24152 7.9759H7.18182C7.18182 7.9759 7.18182 4.89157 8.6075 2ZM11.2491 6.53012C11.5132 6.53012 11.6717 6.33735 11.6717 6.14458V5.37349C11.6717 5.13253 11.4604 4.98795 11.2491 4.98795C10.985 4.98795 10.8265 5.18072 10.8265 5.37349V6.14458C10.8265 6.38554 11.0377 6.53012 11.2491 6.53012Z" fill="url(#paint0_linear_87_7821)"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M7.97359 12.0723C6.23019 12.0723 4.48679 11.4458 3.43019 10.2409C3.16509 9.85542 3.64056 9.61446 3.85212 9.85542C4.69811 10.9639 6.33585 11.5422 7.97359 11.5422C8.35156 11.5422 8.81887 11.494 8.81887 11.494C8.66038 10.1446 8.71321 8.93976 8.76603 8.36145H6.75849V7.9759C6.75849 7.9759 6.75849 4.89157 8.18417 2H1.42264C1.15849 2 1 2.19277 1 2.38554V13.6145C1 13.8072 1.21132 14 1.42264 14H9.25C9.22494 13.8948 9.19988 13.7926 9.17516 13.6918C9.04623 13.1655 8.92696 12.6792 8.8717 12.0241C8.8717 12.0241 8.25781 12.0723 7.97359 12.0723ZM4.69811 4.98795C4.43396 4.98795 4.27547 5.18072 4.27547 5.37349V6.14458C4.27547 6.33735 4.48679 6.48193 4.69811 6.48193C4.90943 6.48193 5.12075 6.33735 5.12075 6.14458V5.37349C5.12075 5.18072 4.96226 4.98795 4.69811 4.98795Z" fill="url(#paint1_linear_87_7821)"></path>
          <defs>
            <filter id="filter0_d_87_7821" x="0.5" y="1.75" width="15" height="13" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix>
              <feOffset dy="0.25"></feOffset>
              <feGaussianBlur stdDeviation="0.25"></feGaussianBlur>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_87_7821"></feBlend>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_87_7821" result="shape"></feBlend>
            </filter>
            <linearGradient id="paint0_linear_87_7821" x1="11.0906" y1="2" x2="11.0906" y2="14" gradientUnits="userSpaceOnUse">
              <stop stop-color="#F7F6F7"></stop>
              <stop offset="1" stop-color="#D9E4F0"></stop>
            </linearGradient>
            <linearGradient id="paint1_linear_87_7821" x1="5.125" y1="2" x2="5.125" y2="14" gradientUnits="userSpaceOnUse">
              <stop stop-color="#2FD4FB"></stop>
              <stop offset="1" stop-color="#2777EE"></stop>
            </linearGradient>
          </defs>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button" onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search" class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get" autocomplete="off">
            <label class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text" class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://looechao.github.io/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="site:https://looechao.github.io/">
        <svg width="32" height="32" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g filter="url(#filter0_d_87_7821)">
            <rect x="1" y="2" width="14" height="12" rx="0.5" fill="#283544"></rect>
          </g>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M8.6075 2H14.5774C14.7887 2 14.9472 2.14458 15 2.38554V13.6145C15 13.8072 14.7887 14 14.5774 14H9.71702C9.50566 13.3253 9.4 12.6506 9.29434 11.9759C10.5623 11.7349 11.7245 11.1566 12.517 10.2409C12.7811 9.85542 12.3057 9.61446 12.0943 9.85542C11.5132 10.7229 10.4038 11.253 9.24152 11.4458C9.08302 9.51807 9.24152 7.9759 9.24152 7.9759H7.18182C7.18182 7.9759 7.18182 4.89157 8.6075 2ZM11.2491 6.53012C11.5132 6.53012 11.6717 6.33735 11.6717 6.14458V5.37349C11.6717 5.13253 11.4604 4.98795 11.2491 4.98795C10.985 4.98795 10.8265 5.18072 10.8265 5.37349V6.14458C10.8265 6.38554 11.0377 6.53012 11.2491 6.53012Z" fill="url(#paint0_linear_87_7821)"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M7.97359 12.0723C6.23019 12.0723 4.48679 11.4458 3.43019 10.2409C3.16509 9.85542 3.64056 9.61446 3.85212 9.85542C4.69811 10.9639 6.33585 11.5422 7.97359 11.5422C8.35156 11.5422 8.81887 11.494 8.81887 11.494C8.66038 10.1446 8.71321 8.93976 8.76603 8.36145H6.75849V7.9759C6.75849 7.9759 6.75849 4.89157 8.18417 2H1.42264C1.15849 2 1 2.19277 1 2.38554V13.6145C1 13.8072 1.21132 14 1.42264 14H9.25C9.22494 13.8948 9.19988 13.7926 9.17516 13.6918C9.04623 13.1655 8.92696 12.6792 8.8717 12.0241C8.8717 12.0241 8.25781 12.0723 7.97359 12.0723ZM4.69811 4.98795C4.43396 4.98795 4.27547 5.18072 4.27547 5.37349V6.14458C4.27547 6.33735 4.48679 6.48193 4.69811 6.48193C4.90943 6.48193 5.12075 6.33735 5.12075 6.14458V5.37349C5.12075 5.18072 4.96226 4.98795 4.69811 4.98795Z" fill="url(#paint1_linear_87_7821)"></path>
          <defs>
            <filter id="filter0_d_87_7821" x="0.5" y="1.75" width="15" height="13" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix>
              <feOffset dy="0.25"></feOffset>
              <feGaussianBlur stdDeviation="0.25"></feGaussianBlur>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_87_7821"></feBlend>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_87_7821" result="shape"></feBlend>
            </filter>
            <linearGradient id="paint0_linear_87_7821" x1="11.0906" y1="2" x2="11.0906" y2="14" gradientUnits="userSpaceOnUse">
              <stop stop-color="#F7F6F7"></stop>
              <stop offset="1" stop-color="#D9E4F0"></stop>
            </linearGradient>
            <linearGradient id="paint1_linear_87_7821" x1="5.125" y1="2" x2="5.125" y2="14" gradientUnits="userSpaceOnUse">
              <stop stop-color="#2FD4FB"></stop>
              <stop offset="1" stop-color="#2777EE"></stop>
            </linearGradient>
          </defs>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16" version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  
<div>
  <main>
    <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-lg-4 "> 
                <div class="repohead-details-container clearfix container-lg p-responsive d-lg-block"> 
                    <div class="d-flex">
                        <h1 class="public css-truncate float-none flex-auto width-fit pl-0">
                            <a class="avatar mr-1" href="https://looechao.github.io/">
                            
                                <img src="/images/profile.png" class="avatar-user" width="26" height="26" title="Looe">
                            
                            </a>
                            
                            <strong itemprop="name"><a href="https://looechao.github.io/post/2024/linux-01/">Linux学习笔记-24年5月第一组</a></strong>

                            

                            
                            <div class="d-block text-small text-gray">
                                <span class="d-inline-block">
                                    Created at <time datetime="2024-05-18 15:38" class="no-wrap">
                                        2024-05-18 15:38</time>
                                </span>

                                
                                </span>
                            </div>
                        </h1>
                    </div>
                </div>
            </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      4533 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/%E6%8A%80%E6%9C%AF">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      技术
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/linux">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Linux
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="推荐书籍">推荐书籍</h1>
<p>the linux command line</p>
<p>linux 系统编程</p>
<p>linux 系统编程接口</p>
<p>APUE</p>
<p>操作系统导论 - 深入理解操作系统</p>
<h1 id="常用命令">常用命令</h1>
<h2 id="vim">Vim</h2>
<p>Vim是一种多模式的编辑器</p>
<ul>
<li>
<p>Normal（命令模式）</p>
<table>
  <thead>
      <tr>
          <th>命令类型</th>
          <th>效果</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>短命令</td>
          <td>直接敲</td>
      </tr>
      <tr>
          <td>底部命令</td>
          <td>冒号开头，enter结尾</td>
      </tr>
      <tr>
          <td>motion(移动光标)</td>
          <td>h j k l [n]- [n]G gg 0 ^ $ w/W b/B t/T f/F</td>
      </tr>
      <tr>
          <td>text object</td>
          <td></td>
      </tr>
      <tr>
          <td>action</td>
          <td></td>
      </tr>
      <tr>
          <td>组合</td>
          <td>action+textobject  <br />action+motion</td>
      </tr>
      <tr>
          <td>撤销和恢复</td>
          <td>u（u for undo）<br />[ctrl] + r<br />类比入栈和出栈</td>
      </tr>
      <tr>
          <td>粘贴</td>
          <td>p/P</td>
      </tr>
      <tr>
          <td>查找文本</td>
          <td>/pattern 向下查找<br />?pattern 向上查找<br />搭配使用 n/N 移动光标</td>
      </tr>
      <tr>
          <td>替换</td>
          <td>substitute<br />:s/pattern/replace             替换所在行的第一个匹配项<br />:s/pattern/replace/g         替换所在行的所有匹配项<br />:m,n s/pattern/replace/g 限定范围[m,n]<br />:% s/pattern/replace/g     全文替换</td>
      </tr>
  </tbody>
</table>
<p>motion:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">h j k l <span class="o">[</span>n<span class="o">]</span>- <span class="o">[</span>n<span class="o">]</span>G gg <span class="m">0</span> ^ $ w/W b/B t/T
</span></span></code></pre></div><p>text object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">d
</span></span><span class="line"><span class="cl">y
</span></span><span class="line"><span class="cl">c<span class="o">(</span>c <span class="k">for</span> change, 删除并进入到编辑模式<span class="o">)</span>
</span></span></code></pre></div></li>
<li>
<p>Insert（编辑文本）</p>
<ul>
<li>i 光标前 I 行前 a A o O 区分</li>
</ul>
</li>
<li>
<p>Visual / V-Block （行选/竖选）</p>
<ul>
<li>v 行选Visual</li>
<li>[ctrl] + v 竖选V-Block</li>
<li>批量注释
<ul>
<li>进入到竖选模式 [ctrl] + v</li>
<li>选择范围</li>
<li>在行首插入 I</li>
<li>按ESC完成注释</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="基本操作">基本操作</h3>
<p>移动(motion)</p>
<table>
  <thead>
      <tr>
          <th>按键</th>
          <th>操作</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>O</td>
          <td>行首</td>
      </tr>
      <tr>
          <td>$</td>
          <td>行尾</td>
      </tr>
      <tr>
          <td>w(word)</td>
          <td>下一个词首</td>
      </tr>
      <tr>
          <td>b(before)</td>
          <td>上一个词首</td>
      </tr>
  </tbody>
</table>
<p>动作(action)</p>
<table>
  <thead>
      <tr>
          <th>按键</th>
          <th>操作</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>d</td>
          <td>delete</td>
      </tr>
      <tr>
          <td>y</td>
          <td>yank</td>
      </tr>
      <tr>
          <td>c(change)</td>
          <td>删除并进入插入模式</td>
      </tr>
  </tbody>
</table>
<p>组合操作：action+motion</p>
<p>撤销恢复和删除</p>
<p>查找</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">/pattern    向下查找 n下一个匹配项  N 上一个匹配项
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">?pattern    向上查找
</span></span></code></pre></div><p>替换</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">:s/pattern/replace/g
</span></span><span class="line"><span class="cl">:5,100s/pattern/replace/g   指定范围进行替换
</span></span><span class="line"><span class="cl">:%s/pattern/replace/g    全文替换
</span></span></code></pre></div><p>多窗口</p>
<table>
  <thead>
      <tr>
          <th>类型</th>
          <th>操作</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>水平分割</td>
          <td>:split /:sp :new</td>
      </tr>
      <tr>
          <td>垂直分割</td>
          <td>:/vsplit /:vsp :vnew</td>
      </tr>
      <tr>
          <td>切换窗口</td>
          <td>[ctrl]+ww</td>
      </tr>
      <tr>
          <td>退出窗口</td>
          <td>:q :only :qa</td>
      </tr>
      <tr>
          <td>保存</td>
          <td>:W :wa</td>
      </tr>
  </tbody>
</table>
<h2 id="linux">Linux</h2>
<h3 id="体系结构">体系结构</h3>
<ul>
<li>
<p>内核（kernal）</p>
<ul>
<li>管理硬件资源
<ul>
<li>CPU -&gt; 进程调度模块</li>
<li>内存 -&gt; 内存管理模块</li>
<li>外部设备 -&gt; 文件管理，网络通信，设备驱动</li>
</ul>
</li>
<li>对上层应用程序提供接口-&gt;系统调用</li>
</ul>
</li>
<li>
<p>系统调用（system calls）</p>
<ul>
<li>内核给上层应用程序提供的接口</li>
</ul>
</li>
<li>
<p>库函数（library functions）</p>
<ul>
<li>
<p>对系统调用的包装</p>
<table>
  <thead>
      <tr>
          <th>给用户的接口</th>
          <th>包装的系统调用</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>malloc</td>
          <td>sbrk</td>
      </tr>
      <tr>
          <td>printf</td>
          <td>write</td>
      </tr>
  </tbody>
</table>
<p>不同系统相同功能的系统调用是不同的，封装包装好系统调用有以下优点</p>
<ul>
<li>方便使用</li>
<li>可移植</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="linux用户">Linux用户</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: center">用户类型</th>
          <th style="text-align: center">权限</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">root</td>
          <td style="text-align: center">超级用户，（皇帝，拥有至高无上的权限）</td>
      </tr>
      <tr>
          <td style="text-align: center">sudoers</td>
          <td style="text-align: center">管理员用户，（太监，可以用sudo临时提高权限）</td>
      </tr>
      <tr>
          <td style="text-align: center">普通用户</td>
          <td style="text-align: center">平民</td>
      </tr>
  </tbody>
</table>
<ul>
<li>
<p>创建用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd
</span></span></code></pre></div></li>
<li>
<p>删除用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">userdel
</span></span></code></pre></div></li>
<li>
<p>修改用户密码</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">passwd
</span></span></code></pre></div></li>
<li>
<p>切换用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su
</span></span></code></pre></div></li>
<li>
<p>退出切换</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">exit</span>
</span></span></code></pre></div></li>
<li>
<p>查看所用用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo cat /etc/passwd
</span></span></code></pre></div></li>
<li>
<p>添加用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd <span class="o">[</span>options<span class="o">]</span> username
</span></span></code></pre></div></li>
</ul>
<h2 id="文件子系统">文件子系统</h2>
<p>Windows以程序划分文件，而Linux是按照功能划分文件位置，分门别类的管理</p>
<table>
  <thead>
      <tr>
          <th>目录名</th>
          <th>功能</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>/bin(binary)</td>
          <td>存放可执行文件</td>
      </tr>
      <tr>
          <td>/sys(system)</td>
          <td>存放系统文件</td>
      </tr>
      <tr>
          <td>/dev(device)</td>
          <td>设备文件</td>
      </tr>
      <tr>
          <td>/etc</td>
          <td>配置文件（passwd放用户信息/shadow存放密码）</td>
      </tr>
      <tr>
          <td>/lib(library)</td>
          <td>库文件</td>
      </tr>
      <tr>
          <td>/var(variable)</td>
          <td>日志文件等会发生变化的文件</td>
      </tr>
      <tr>
          <td>/proc(process)</td>
          <td>进程文件</td>
      </tr>
      <tr>
          <td>/root</td>
          <td>根目录</td>
      </tr>
      <tr>
          <td>/home(username)</td>
          <td>普通用户的家目录</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>                      /                              <span class="o">]</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> <span class="o">[</span>bin<span class="o">]</span>   <span class="o">[</span>sys<span class="o">]</span> <span class="o">[</span>dev<span class="o">]</span>  <span class="o">[</span>etc<span class="o">]</span>  <span class="o">[</span>lib<span class="o">]</span>  <span class="o">[</span>var<span class="o">]</span>  <span class="o">[</span>root<span class="o">]</span> <span class="o">[</span>home<span class="o">]</span>   
</span></span><span class="line"><span class="cl">                        /   <span class="se">\ </span>                       <span class="p">|</span>
</span></span><span class="line"><span class="cl">                       /     <span class="se">\ </span>                      <span class="p">|</span>
</span></span><span class="line"><span class="cl">                   <span class="o">[</span>passwd<span class="o">]</span>  <span class="o">[</span>shadow<span class="o">]</span>             <span class="o">[</span>a.txt<span class="o">]</span> -&gt; inode -&gt; 物理地址
</span></span><span class="line"><span class="cl">                    
</span></span></code></pre></div><h3 id="通配符">通配符</h3>
<p>通配符（wildcard character）: <strong>用于匹配文件名字</strong>，注意与正则表达式的区别，正则表达式是用于匹配文件内容的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">*: 匹配任意多个字符，包括0个
</span></span><span class="line"><span class="cl">?: 匹配任意一个字符
</span></span><span class="line"><span class="cl">集合（类）: 
</span></span><span class="line"><span class="cl"><span class="o">[</span> characters<span class="o">]</span> 匹配集合内任意一个字符
</span></span><span class="line"><span class="cl"><span class="o">[</span>!characters<span class="o">]</span> 匹配集合外任意一个字符
</span></span><span class="line"><span class="cl"><span class="o">[</span>abc<span class="o">]</span> <span class="o">[</span>!abc<span class="o">]</span> <span class="o">[</span>0-9<span class="o">]</span> <span class="o">[</span>a-z<span class="o">]</span> <span class="o">[</span>A-z<span class="o">]</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ tree
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">├── dira
</span></span><span class="line"><span class="cl">├── diraaa
</span></span><span class="line"><span class="cl">├── dirb
</span></span><span class="line"><span class="cl">├── dirbbb
</span></span><span class="line"><span class="cl">├── dirc
</span></span><span class="line"><span class="cl">├── dirccc
</span></span><span class="line"><span class="cl">├── dirxxx
</span></span><span class="line"><span class="cl">├── diryyy
</span></span><span class="line"><span class="cl">└── dirzzz
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">10</span> directories, <span class="m">0</span> files
</span></span><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ rmdir dir*
</span></span><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ tree
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ 
</span></span></code></pre></div><ul>
<li>匹配任意多个字符</li>
<li>匹配任意一个字符</li>
</ul>
<h3 id="ls命令">ls命令</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: center">常用选项</th>
          <th style="text-align: center">作用</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">list -i</td>
          <td style="text-align: center">显示inode编号，inode是物理文件的唯一标识</td>
      </tr>
      <tr>
          <td style="text-align: center">list -l</td>
          <td style="text-align: center">long format，用长格式显示每个目录的内容</td>
      </tr>
      <tr>
          <td style="text-align: center">list -h</td>
          <td style="text-align: center">常和-l一起使用，以人类可读的方式显示文件的大小</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora ~<span class="o">]</span>$ ls -l
</span></span><span class="line"><span class="cl">总计 <span class="m">0</span>
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 公共
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 模板
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao  <span class="m">12</span>  4月26日 18:56 视频
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao  <span class="m">12</span>  4月26日 18:56 图片
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 文档
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao <span class="m">324</span>  5月13日 14:19 下载
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 音乐
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 桌面
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">第一个字符文件类型
</span></span><span class="line"><span class="cl">    -: 普通文件  d<span class="o">(</span>dir<span class="o">)</span>:目录  c<span class="o">(</span>character<span class="o">)</span>:字符设备文件，键盘屏幕 b<span class="o">(</span>block<span class="o">)</span>: 块设备文件（磁盘 u盘）
</span></span><span class="line"><span class="cl">    p<span class="o">(</span>pipe<span class="o">)</span>: 有名管道  -s<span class="o">(</span>socket<span class="o">)</span>:本地套接字  -l<span class="o">(</span>link<span class="o">)</span>:符号链接
</span></span><span class="line"><span class="cl">剩余的九个字符：权限
</span></span><span class="line"><span class="cl">    文件拥有者usr:rw-
</span></span><span class="line"><span class="cl">    文件所有组group:rw-
</span></span><span class="line"><span class="cl">    其他人others: r--
</span></span></code></pre></div><h3 id="创建目录">创建目录</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p  创建目录
</span></span><span class="line"><span class="cl">rmdir -p  删除目录
</span></span><span class="line"><span class="cl">打印当前目录
</span></span><span class="line"><span class="cl"><span class="nb">pwd</span>
</span></span><span class="line"><span class="cl">切换当前目录
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> - . / ~  上一次目录保存在OLDPWD环境变量中
</span></span><span class="line"><span class="cl">复制
</span></span><span class="line"><span class="cl">cp src dst 复制文件
</span></span><span class="line"><span class="cl">cp -r src dst 递归复制目录
</span></span><span class="line"><span class="cl">cp src .. srcn dst 将多个文件复制到某个目录下
</span></span><span class="line"><span class="cl">cp -n 不抢夺
</span></span><span class="line"><span class="cl">cp -i 交互式方式询问
</span></span></code></pre></div><h3 id="mv命令">mv命令</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mv text1 text2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>text1<span class="o">]</span>   <span class="o">[</span>text2<span class="o">]</span>                <span class="o">[</span>text2<span class="o">]</span>
</span></span><span class="line"><span class="cl">   <span class="se">\ </span>     /             -&gt;          <span class="p">|</span>
</span></span><span class="line"><span class="cl">   <span class="o">[</span>inode<span class="o">]</span>                       <span class="o">[</span>inode<span class="o">]</span>
</span></span><span class="line"><span class="cl">  
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mv text1 dir
</span></span></code></pre></div><h3 id="别名">别名</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nb">cd</span> <span class="o">=</span> <span class="s1">&#39;rm -rf&#39;</span>
</span></span></code></pre></div><h3 id="创建文件">创建文件</h3>
<ul>
<li>
<p>创建空文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">touch
</span></span></code></pre></div></li>
<li>
<p>创建文件并输入简短的内容</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span>
</span></span></code></pre></div></li>
<li>
<p>编辑文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim
</span></span></code></pre></div></li>
</ul>
<h3 id="查找">查找</h3>
<p>find命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">find . -empty   找到空的文件和文件夹
</span></span><span class="line"><span class="cl">find . -user root 根据用户名称进行查找
</span></span><span class="line"><span class="cl">find . -uid root  根据用户id进行查找
</span></span><span class="line"><span class="cl">find . -perm <span class="m">775</span> 读写执行 读执行 根据权限查找
</span></span></code></pre></div><p>关于时间</p>
<ul>
<li>a(access) 文件访问时间</li>
<li>c(change) 文件属性发生改变的时间</li>
<li>m(modigy) 文件内容发生改变的时间</li>
<li>min 以分钟为单位</li>
<li>time 以天为单位</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">find . -mtime <span class="m">1</span>
</span></span><span class="line"><span class="cl">find . -mmin <span class="m">2</span>
</span></span><span class="line"><span class="cl">find . -mmin +2
</span></span><span class="line"><span class="cl">find . -mtime <span class="m">1</span> 一到两天内发生过内容修改的文件
</span></span></code></pre></div><p>组合查找</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">find /dev -type c -a -name <span class="s2">&#34;tty*&#34;</span>
</span></span><span class="line"><span class="cl">find /dev -type b -o -name <span class="s2">&#34;tty*&#34;</span>
</span></span><span class="line"><span class="cl">find /dev -type c -a !-name <span class="s2">&#34;tty*&#34;</span>
</span></span></code></pre></div><h3 id="查看">查看</h3>
<p>cat 和 head</p>
<pre tabindex="0"><code>head -n 5 bible
tail -n +5 bible
</code></pre><p>less 单页浏览文件</p>
<pre tabindex="0"><code>less bible
</code></pre><h3 id="重定向">重定向</h3>
<table>
  <thead>
      <tr>
          <th>标准流</th>
          <th>文件描述符</th>
          <th>重定向符号</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>stdin</td>
          <td>0</td>
          <td>&lt;</td>
      </tr>
      <tr>
          <td>stdout</td>
          <td>1</td>
          <td>&gt;和&raquo;</td>
      </tr>
      <tr>
          <td>stderr</td>
          <td>2</td>
          <td>2&gt;或2&raquo;</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> &gt; 覆盖重定向
</span></span><span class="line"><span class="cl">&gt;&gt; 追加重定向
</span></span><span class="line"><span class="cl"><span class="o">[</span>ctrl<span class="o">]</span> + D 输入EOF
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wc users   
</span></span><span class="line"><span class="cl">          键盘 stdin-<span class="o">[</span>程序<span class="o">]</span> 
</span></span><span class="line"><span class="cl">                    /  
</span></span><span class="line"><span class="cl">          文件  <span class="o">[</span>  <span class="o">]</span>
</span></span><span class="line"><span class="cl">wc &lt; users
</span></span></code></pre></div><h3 id="grep">grep</h3>
<p>用于搜索文件内容 globally search for a regular expression, 如果文件中某一行匹配指定的正则表达式，grep命令会显示这一行</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grep -E 使用拓展的正则表达式
</span></span><span class="line"><span class="cl">grep -i ignore忽略大小写
</span></span><span class="line"><span class="cl">grep -v --invert-match显示不匹配正则表达式的行
</span></span><span class="line"><span class="cl">grep -c 统计包含查找值的行数
</span></span></code></pre></div><h3 id="正则表达式">正则表达式</h3>
<ol>
<li>
<p>基本单位</p>
<ul>
<li>字符</li>
<li>转义字符</li>
<li>集合</li>
</ul>
</li>
<li>
<p>基本操作</p>
<p>操作对象是基本单位</p>
<ul>
<li>
<p>连接:</p>
<table>
  <thead>
      <tr>
          <th>操作</th>
          <th>效果</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ab</td>
          <td>ab</td>
      </tr>
      <tr>
          <td>[abc]x</td>
          <td>ax bx cx</td>
      </tr>
      <tr>
          <td>.txt</td>
          <td>atxt btxt</td>
      </tr>
  </tbody>
</table>
</li>
<li>
<p>重复:</p>
<p>指前面的基本单位重复的次数</p>
<ul>
<li>‘+’ 重复至少一次     &ldquo;[abc]+&rdquo; &ldquo;abc+&rdquo; &ldquo;(abc)+&rdquo;</li>
<li>‘？’重复零次或一次 &ldquo;abc?&rdquo; &ldquo;[abc]?&rdquo; &ldquo;(abc)?&rdquo;</li>
<li>‘*’  重复任意次数</li>
</ul>
</li>
<li>
<p>指定基本位置</p>
</li>
</ul>
</li>
</ol>
<h2 id="命令组合">命令组合</h2>
<ol>
<li>
<p>cmd1; cmd2</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@fedora:/home/looechao# mkdir linux03<span class="p">;</span> <span class="nb">cd</span> linux03
</span></span><span class="line"><span class="cl">root@fedora:/home/looechao/linux03# 
</span></span></code></pre></div></li>
<li>
<p>cmd1 | cmd2</p>
<p>管道，pipe, 用history 的输出输入到wc -l 这个程序中</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@fedora:/home/looechao/cpp58# <span class="nb">history</span> <span class="p">|</span> wc -l
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">  cmd <span class="m">1</span>               cmd2
</span></span><span class="line"><span class="cl"><span class="o">[</span> stdout <span class="o">]</span>-&gt;<span class="o">[</span>管道<span class="o">]</span>-&gt;<span class="o">[</span> stdin xargs<span class="o">[]</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">              ^
</span></span><span class="line"><span class="cl">              <span class="p">|</span>
</span></span><span class="line"><span class="cl">     内存，由内核管理的数据结构  
</span></span></code></pre></div></li>
<li>
<p>cmd1 | xargs cmd2</p>
<p>将cmd1输出的每一行作为cmd2的命令行参数</p>
</li>
</ol>
<h2 id="文件的权限">文件的权限</h2>
<table>
  <thead>
      <tr>
          <th>类型</th>
          <th>权限</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>r</td>
          <td>可读</td>
      </tr>
      <tr>
          <td>w</td>
          <td>可写</td>
      </tr>
      <tr>
          <td>x</td>
          <td>可执行</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/env python                                              sharp bang shebang 脚本文件的解释器       </span>
</span></span></code></pre></div><p>增加可执行权限</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@fedora:/home/looechao/coding# chmod +x hello.py
</span></span><span class="line"><span class="cl">root@fedora:/home/looechao/coding# ./hello.py
</span></span><span class="line"><span class="cl">hello world
</span></span></code></pre></div><p>关于目录项</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> 目录项（directory entry: direct）
</span></span><span class="line"><span class="cl">   <span class="p">|</span>
</span></span><span class="line"><span class="cl">  <span class="o">[</span>.<span class="o">]</span>-&gt;<span class="o">[</span>a.txt<span class="o">]</span>-&gt;<span class="o">[</span>text<span class="o">]</span>-&gt;<span class="o">[</span>..<span class="o">]</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">       <span class="o">[</span>      library        <span class="o">]</span>
</span></span><span class="line"><span class="cl">       /     /    <span class="p">|</span>      <span class="se">\ </span>   <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">[</span>dir<span class="o">]</span> <span class="o">[</span>.<span class="o">]</span>  <span class="o">[</span>a.txt<span class="o">]</span> <span class="o">[</span>text<span class="o">]</span> <span class="o">[</span>..<span class="o">]</span>
</span></span><span class="line"><span class="cl">   /  <span class="p">|</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  a   b   c
</span></span></code></pre></div><table>
  <thead>
      <tr>
          <th>目录文件的权限</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>r</td>
          <td>ls tree</td>
      </tr>
      <tr>
          <td>w</td>
          <td>删除目录项，添加目录项</td>
      </tr>
      <tr>
          <td>x</td>
          <td>最基本的权限(cd, ls , w ,r)</td>
      </tr>
  </tbody>
</table>
<h3 id="chmod-命令">chmod 命令</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ chmod o+w text1   为其他人添加写权限
</span></span><span class="line"><span class="cl">$ chmod <span class="nv">u</span><span class="o">=</span>rwx,g<span class="o">=</span>rx,o<span class="o">=</span>r text1
</span></span><span class="line"><span class="cl">$ chmod <span class="m">664</span> text1 数字设定法
</span></span></code></pre></div><h3 id="文件创建掩码">文件创建掩码</h3>
<p>umask ：u for unix</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">umask</span> <span class="m">0023</span>
</span></span></code></pre></div><h2 id="符号链接">符号链接</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ln -s text1 link
</span></span></code></pre></div><p>删除命令不会更改链接指向的值</p>
<p>如果创建的链接是指向空目录的时候，就会产生一个悬空链接，类似于C语言当中的野指针</p>
<h2 id="远程控制">远程控制</h2>
<p>scp: secure copy （基于SSH协议）， 进行远程复制（上传和下载），上传即将本地数值远程复制到远程，下载即将远程数据复制到本地</p>
<ul>
<li><strong>本地路径</strong>：
<ul>
<li>绝对路径：</li>
<li>相对路径：</li>
</ul>
</li>
<li><strong>远程路径</strong>
<ul>
<li>用户名(远程机器的用户名)@IP:绝对路径</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ scp 
</span></span></code></pre></div><h2 id="打包">打包</h2>
<p>tar: text archieve</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar c  创建
</span></span><span class="line"><span class="cl">tar r  追加
</span></span><span class="line"><span class="cl">tar x  释放
</span></span><span class="line"><span class="cl">tar t  查看
</span></span><span class="line"><span class="cl">tar f  指定文件的名称
</span></span><span class="line"><span class="cl">tar v  verbose 详细信息
</span></span><span class="line"><span class="cl">tar z  使用zip算法压缩或者解压缩文件
</span></span></code></pre></div><pre tabindex="0"><code>tar czvf create zip verbose 命名.tar.gz
</code></pre><h1 id="编译工具链">编译工具链</h1>
<p>对应集成开发环境(IDE)，又叫SDK（Software Development Kit）</p>
<p>过程</p>
<table>
  <thead>
      <tr>
          <th>过程</th>
          <th>生成文件</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>gcc -E</td>
          <td>预处理后文件(*.i)</td>
      </tr>
      <tr>
          <td>gcc -S</td>
          <td>汇编代码(*.s)</td>
      </tr>
      <tr>
          <td>gcc -C</td>
          <td>目标文件(*.o)</td>
      </tr>
      <tr>
          <td>无</td>
          <td>可执行程序</td>
      </tr>
      <tr>
          <td>gcc -l$</td>
          <td>链接&amp;{lib}库</td>
      </tr>
      <tr>
          <td>gcc -Wall</td>
          <td>警告消息</td>
      </tr>
      <tr>
          <td>gcc -g</td>
          <td>补充调试信息</td>
      </tr>
      <tr>
          <td>gcc -O1 -O2 -O3</td>
          <td>指定优化级别</td>
      </tr>
      <tr>
          <td>gcc -D${macro}</td>
          <td>#define &amp;{macro}定义宏</td>
      </tr>
      <tr>
          <td>gcc -D${macro} = ${value}</td>
          <td>#define &amp;{macro} ${value}</td>
      </tr>
      <tr>
          <td>gcc -l${dir}</td>
          <td>#include&lt;&gt;${dir} -&gt; 系统的include目录下搜索<br />#include&quot; &ldquo;${dir} -&gt; 当前工作目录下搜索</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ gcc -E 预处理 
</span></span><span class="line"><span class="cl">$ gcc -S 汇编 -&gt; 汇编代码
</span></span><span class="line"><span class="cl">$ gcc -c 目标文件 compiled生成 hello.o
</span></span><span class="line"><span class="cl">$ gcc 生成可执行程序
</span></span><span class="line"><span class="cl">$ gcc -wall warning all
</span></span><span class="line"><span class="cl">$ gcc -o0 -o1 -o2 -o3
</span></span><span class="line"><span class="cl">       ^     ^
</span></span><span class="line"><span class="cl">       <span class="p">|</span> <span class="o">[</span>生产阶段<span class="o">]</span> 
</span></span><span class="line"><span class="cl">$ gcc -g 生成调试信息
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ Dmacro: 在文件开头 <span class="c1">#define macro</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ gcc -E main.c -o main.i DEBUG  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">rm main.<span class="o">[</span>^c<span class="o">]</span>  一处所有.c 之外的文件 
</span></span><span class="line"><span class="cl">rm main 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;func.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef MAXSIZE
</span></span></span><span class="line"><span class="cl"><span class="cp">#define MAXSIZE 4096
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="n">MAXSIZE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef DEBUG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="nf">printf</span><span class="p">(</span><span class="s">&#34;i = %d&#34;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="条件编译">条件编译</h2>
<p>作用：在预处理阶段决定包含哪些代码块，不包含哪些代码块</p>
<p>方法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#if  ... #elif ... #else ... #endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#ifdef ... #endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#ifndef ... #endif
</span></span></span></code></pre></div><p>应用场景：</p>
<ul>
<li>编写可以指的代码</li>
<li>给宏提供默认值</li>
<li>调试程序</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define DEBUG 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="gdb-调试">gdb 调试</h2>
<ul>
<li>
<p>调试往往更难</p>
</li>
<li>
<p>调试程序流程</p>
<ul>
<li>
<p>走走</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> run/n
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="k">continue</span>/n
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> next/n
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> step/s
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> finish/f  回到主调函数
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> ignore<span class="o">(</span>NUM<span class="o">)</span> 忽略断点NUM次,调试循环时非常有用
</span></span></code></pre></div></li>
<li>
<p>停停</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> break/b
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> delete/s
</span></span></code></pre></div></li>
<li>
<p>看看（观察是否和预期一致）</p>
<ul>
<li>预期错了，说明快找到原因了</li>
<li>程序错了，表明提出线索</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> print/p
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> display/EXPR
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info display
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> undisplay
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info locals
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info args
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info registers
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-BASH" data-lang="BASH"><span class="line"><span class="cl"><span class="nv">$gdb</span> main
</span></span><span class="line"><span class="cl"><span class="nv">$gcc</span> main.c -o main -g   编译必须要加g
</span></span><span class="line"><span class="cl"><span class="nv">$gdb</span> main aaa bbb ccc 
</span></span><span class="line"><span class="cl">      <span class="p">|</span>   命令行参数
</span></span><span class="line"><span class="cl">  executable
</span></span><span class="line"><span class="cl">  
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> quit //退出
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> run<span class="o">(</span>r<span class="o">)</span>  //跑程序
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">set</span> args aaa bbb ccc //设置命令行参数
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> list  //显示代码，默认10行
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> break<span class="o">(</span>b<span class="o">)</span>  //设置断点 
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> <span class="m">14</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> main.c :14
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> foo  //指定函数的名字
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> main.c:foo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info <span class="nb">break</span> //停一停程序
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> delete <span class="m">1</span> //删除断点1
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> delete //会询问是否删除所有的断点
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> next<span class="o">(</span>n<span class="o">)</span>  //下一步下一行或者遇到函数会执行完整个函数调用
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> step //单步调试
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> finish // 执行完这次函数调用会回到被调函数
</span></span></code></pre></div><p><strong>常见用法</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> display r
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> display PI*r*r
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info display
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> undisplay
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> undisplay
</span></span></code></pre></div><p><strong>查看内存</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gcc main.c -o main -Wall -g
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> gdb main
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> <span class="m">11</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> r
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> x/nFU address
</span></span><span class="line"><span class="cl">  n个单元的内存 U表示内存单元
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> x/4db arr+5
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> x/4xb arr+5
</span></span></code></pre></div><p><strong>用gdb查看core文件</strong></p>
<ul>
<li>
<p>core文件</p>
<ul>
<li>概念：类比黑匣子，core文件是程序异常终止时的内存快照（包含一些堆、栈、寄存器信息）</li>
<li>功能：恢复场景，还原错误</li>
<li>方法：用gdb生成core文件</li>
</ul>
</li>
<li>
<p>生成core文件</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">查看系统是否允许生成coredump文件
</span></span><span class="line"><span class="cl">$ <span class="nb">ulimit</span> -a
</span></span><span class="line"><span class="cl">$ <span class="nb">ulimit</span> -c unlimited  将core文件的大小临时设置为不受限制
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">设置coredump文件的格式
</span></span><span class="line"><span class="cl">$ vim /etc/sysctl.conf
</span></span><span class="line"><span class="cl"> kernel.core_pattern <span class="o">=</span> %e_core_%s_%t executubal-name sigbal <span class="nb">time</span>
</span></span><span class="line"><span class="cl">$ sysctl -p  让配置生效
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> sysctl <span class="k">for</span> system control
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ gcc <span class="nb">test</span> .c -o <span class="nb">test</span> -g  注意-g补充调试信息
</span></span><span class="line"><span class="cl">$ ./test
</span></span><span class="line"><span class="cl">Floating point exception <span class="o">(</span>core dumped<span class="o">)</span>
</span></span></code></pre></div><ul>
<li>查看core文件</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">test</span> test_core_8_1715911762.2496
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> backtrace   或者 bt 打开栈帧的调试情况 结果显示从栈顶到栈底
</span></span><span class="line"><span class="cl"><span class="c1">#0  ···</span>
</span></span><span class="line"><span class="cl"> ·  ···
</span></span><span class="line"><span class="cl"><span class="c1">#3</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> frame3 查看栈帧
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info args 查看局部变量的值
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info locals
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> 
</span></span></code></pre></div><h2 id="makefile原理">Makefile原理</h2>
<ul>
<li>
<p>Makefile</p>
<ul>
<li>
<p>makefile 是一个脚本文件，使用make工具可以解释执行makefile脚本文件</p>
</li>
<li>
<p>makefile 的优点</p>
<ul>
<li>自动编译</li>
<li>增量编译（只编译新增和修改过的.c文件）</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">a.c  -&gt; a.o
</span></span><span class="line"><span class="cl">b.c  -&gt; b.o   
</span></span><span class="line"><span class="cl">c.c  -&gt; b.o   -&gt; 链接生成 executable
</span></span><span class="line"><span class="cl">···            
</span></span><span class="line"><span class="cl">x.c  -&gt; x.o
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>书写方法</p>
<p>makefile对语法要求非常严格</p>
<p>algs.h</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef __WD_ALGS
</span></span></span><span class="line"><span class="cl"><span class="cp">#DEFINE __WD_ALGS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">mul</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">dev</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span></code></pre></div><p>add.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>mul.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">mul</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>div.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">div</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>main.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nf">mul</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Makefile</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nf">main</span><span class="o">:</span> <span class="n">main</span>.<span class="n">o</span>  <span class="n">add</span>.<span class="n">o</span> <span class="n">mul</span>.<span class="n">o</span> <span class="n">div</span>.<span class="n">o</span> <span class="c">##目标文件和依赖文件  
</span></span></span><span class="line"><span class="cl"><span class="c"></span>	gcc main.0 add.o sub.o mul.o div.o -o main  <span class="c1">##shell命令</span>
</span></span><span class="line"><span class="cl"><span class="c">## 目标和命令共同构成了规则
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c main.c -Wall -g
</span></span><span class="line"><span class="cl"><span class="nf">add.o</span><span class="o">:</span> <span class="n">add</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c add.c -Wall-g
</span></span><span class="line"><span class="cl"><span class="nf">sub.o</span><span class="o">:</span> <span class="n">mul</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c mul.c -wall-g
</span></span><span class="line"><span class="cl"><span class="nf">div.o</span><span class="o">:</span> <span class="n">div</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c div.c -Wall-g
</span></span><span class="line"><span class="cl">	....
</span></span><span class="line"><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span> <span class="n">rebuild</span>
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	rm- rf *.o main
</span></span><span class="line"><span class="cl"><span class="nf">rebuild</span><span class="o">:</span> <span class="n">clean</span> <span class="n">main</span>
</span></span></code></pre></div></li>
<li>
<p>原理</p>
<ul>
<li>
<p>依赖关系: 一般使用有向无环图来表示（Directed Acyclic Graph, DAG）, make在执行脚本的时候，在内部会生成DAG，执行过程会用到DFS（深度优先遍历）</p>
<pre tabindex="0"><code class="language-bsah" data-lang="bsah">           main 
        /   |   \              
   main.o add.o sub.o  ···
    / \    | |  ···  ··· 
main.c \   |add.c 
       algs.h
</code></pre><p>通过拓扑排序可以保证有向无环图的依赖关系, 常常会用到DFS算法</p>
</li>
<li>
<p>伪目标：规则中的shell命令不一定要生成目标文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span>    <span class="c">##PHONY伪目标
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nf">clean</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">	rm-rf *.o main
</span></span></code></pre></div><p>如上规则，没有任何目标文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ make clean
</span></span></code></pre></div><p>这样的伪目标可以反复执行</p>
</li>
<li>
<p>什么情况下会执行命令？</p>
<ul>
<li>目标不存在</li>
<li>依赖比目标更新</li>
</ul>
</li>
</ul>
</li>
<li>
<p>效果</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ make
</span></span></code></pre></div><p>会有<strong>自动编译</strong>和<strong>增量编译</strong>的效果</p>
</li>
</ul>
<h2 id="库文件">库文件</h2>
<p>什么是库文件：库文件是目标文件(*.o)的集合</p>
<p>分类：</p>
<ul>
<li>
<p><strong>静态库</strong>：.lib .a 对函数的链接在连接阶段完成</p>
<p>优点：</p>
<ul>
<li>移植方便</li>
</ul>
<p>缺点</p>
<ul>
<li>
<p>浪费空间，每一个进程中都有静态库的一个副本</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>进程 .lib<span class="o">]</span>    <span class="o">[</span>进程  .lib<span class="o">]</span> 
</span></span></code></pre></div></li>
<li>
<p>对程序的更新，部署，发布不友好</p>
</li>
</ul>
</li>
<li>
<p><strong>动态库</strong>：.ddl  .so (dynamic link library) 在运行时完成对函数的链接</p>
<p>优点：</p>
<ul>
<li>
<p>可以共享</p>
</li>
<li>
<p>对程序更新，部署，发布友好</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>进程<span class="o">]</span>   <span class="o">[</span>进程<span class="o">]</span>
</span></span><span class="line"><span class="cl">     <span class="se">\ </span>  /
</span></span><span class="line"><span class="cl">     <span class="o">[</span>.so<span class="o">]</span>
</span></span></code></pre></div></li>
</ul>
<p>缺点</p>
<ul>
<li>不方便移植</li>
</ul>
</li>
</ul>
<p><strong>打包生成静态库的流程：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">args.h add.c  sub.c mul.c div.c  
</span></span><span class="line"><span class="cl">$ make
</span></span><span class="line"><span class="cl">或者
</span></span><span class="line"><span class="cl">$ gcc -c add.c sub.c mul.c div.c
</span></span><span class="line"><span class="cl">$ ar crsv libalgs.a add.o sub.o mul.o div.o   <span class="c1">##打包生成静态库</span>
</span></span><span class="line"><span class="cl">$ sudo mv libalgs.a /usr/lib
</span></span><span class="line"><span class="cl">$ mv * tmp/
</span></span><span class="line"><span class="cl">$ vim main.c
</span></span></code></pre></div><p>在main.c中使用</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#incldue &#34;algs.h&#34;
</span></span></span></code></pre></div><p><strong>打包生成动态库</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls 
</span></span><span class="line"><span class="cl">args.h add.c  sub.c mul.c div.c
</span></span><span class="line"><span class="cl">$ gcc -c *.c -fpic     
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">args.h add.c  sub.c mul.c div.c add.o  sub.o mul.o div.o
</span></span><span class="line"><span class="cl">$ gcc -shared add.o sub.o mul.o div.o -o libarlgs.so
</span></span><span class="line"><span class="cl">$ sudo mv libalgs.so /usr/lib  移动到系统的库目录下面去
</span></span><span class="line"><span class="cl">$ rm *.o
</span></span><span class="line"><span class="cl">$ gcc main.c -o main -lalgs
</span></span><span class="line"><span class="cl">$ ./main
</span></span><span class="line"><span class="cl">/usr/lib$ mv libalgs.so libalgs.so.0.0.1
</span></span><span class="line"><span class="cl">$ ./main 跑不通
</span></span></code></pre></div></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>



<script type="application/javascript" src='https://looechao.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://looechao.github.io/css/toc.css' />


<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://looechao.github.io/css/gitalk.css'>
<script src='https://looechao.github.io/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: '4fad9f9325f73f2c2891',
    clientSecret: '109ed02ced3608e776a41f87de4ef9986f5b5fd6',
    repo: 'hugo-comments',
    owner: 'looechao',
    admin: ['looechao'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://looechao.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://looechao.github.io/js/github-style.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"
  integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"
  integrity="sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"
  integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>





</html>