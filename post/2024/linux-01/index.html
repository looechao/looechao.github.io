<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux学习笔记-24年5月第一组 | </title>
    
    <link rel="icon" href="/images/favicon.png" type="image/x-icon">
    
    <link rel="preload" href="/css/components/right-panel.css" as="style">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/components/sidebar.css">
    <link rel="stylesheet" href="/css/components/footer.css">
    <link rel="stylesheet" href="/css/components/right-panel.css">
    <link rel="stylesheet" href="/css/syntax.css">
    
    <link rel="stylesheet" href="/css/pages/single.css">
    
    
    
    
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9W970VLJ6X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-9W970VLJ6X');
    </script>
    
</head>

<body>
    <div class="site-container">
        <aside class="site-sidebar">
            <aside class="sidebar">
    
    <div class="profile">
        <a href="https://looechao.com/" class="avatar">
            
            <img src="/images/profile.png" alt="Looe" />
            
        </a>
        <div class="profile-text">
            <p class="name">Looe</p>
            <p class="bio">looechao</p>
        </div>
    </div>

    
    <nav class="nav">
        <a href="https://looechao.com/" >BLOG</a>
        <a href="/about" >ABOUT</a>
    </nav>

    
    <div class="site--icons">
        
        <a href="mailto:lu.chao.personal@gmail.com" target="_blank" title="Email">
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 24 24">
                <g id="evaEmailFill0">
                    <g id="evaEmailFill1">
                        <path id="evaEmailFill2" fill="currentColor"
                            d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3Zm0 2l-6.5 4.47a1 1 0 0 1-1 0L5 6Z" />
                    </g>
                </g>
            </svg> </a>
        
        
        <a href="https://www.github.com/looechao" target="_blank" title="Github">
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 20 20">
                <path fill="currentColor"
                    d="M13.18 11.309c-.718 0-1.3.807-1.3 1.799c0 .994.582 1.801 1.3 1.801s1.3-.807 1.3-1.801c-.001-.992-.582-1.799-1.3-1.799zm4.526-4.683c.149-.365.155-2.439-.635-4.426c0 0-1.811.199-4.551 2.08c-.575-.16-1.548-.238-2.519-.238c-.973 0-1.945.078-2.52.238C4.74 2.399 2.929 2.2 2.929 2.2c-.789 1.987-.781 4.061-.634 4.426C1.367 7.634.8 8.845.8 10.497c0 7.186 5.963 7.301 7.467 7.301l1.734.002l1.732-.002c1.506 0 7.467-.115 7.467-7.301c0-1.652-.566-2.863-1.494-3.871zm-7.678 10.289h-.056c-3.771 0-6.709-.449-6.709-4.115c0-.879.31-1.693 1.047-2.369C5.537 9.304 7.615 9.9 9.972 9.9h.056c2.357 0 4.436-.596 5.664.531c.735.676 1.045 1.49 1.045 2.369c0 3.666-2.937 4.115-6.709 4.115zm-3.207-5.606c-.718 0-1.3.807-1.3 1.799c0 .994.582 1.801 1.3 1.801c.719 0 1.301-.807 1.301-1.801c0-.992-.582-1.799-1.301-1.799z" />
            </svg>
        </a>
        
        
    </div>
</aside>
        </aside>
        <aside class="site-right-panel">
            <div class="right-panel">
    <div class="panel-module tags-module">
        <h3 class="module-title">Tags</h3>
        <div class="tags-cloud">
            
            
            
            <a href="https://looechao.com/tags/2024weekly/" class="tag-item tag-alphanumeric" data-count="4">
                2024Weekly<span class="tag-count">4</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/2025weekly/" class="tag-item tag-alphanumeric" data-count="1">
                2025Weekly<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/agent/" class="tag-item tag-alphanumeric" data-count="2">
                Agent<span class="tag-count">2</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/bfs/" class="tag-item tag-alphanumeric" data-count="1">
                BFS<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/c/c&#43;&#43;/" class="tag-item tag-alphanumeric" data-count="17">
                C/C&#43;&#43;<span class="tag-count">17</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/epoll/" class="tag-item tag-alphanumeric" data-count="1">
                EPOLL<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/hexo/" class="tag-item tag-alphanumeric" data-count="1">
                Hexo<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/lectures/" class="tag-item tag-alphanumeric" data-count="1">
                Lectures<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/linux/" class="tag-item tag-alphanumeric" data-count="4">
                Linux<span class="tag-count">4</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/llm/" class="tag-item tag-alphanumeric" data-count="2">
                LLM<span class="tag-count">2</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/microsoft-store/" class="tag-item tag-alphanumeric" data-count="1">
                Microsoft Store<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/omegle/" class="tag-item tag-alphanumeric" data-count="1">
                Omegle<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/oop/" class="tag-item tag-alphanumeric" data-count="1">
                OOP<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/select/" class="tag-item tag-alphanumeric" data-count="1">
                SELECT<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/sso/" class="tag-item tag-alphanumeric" data-count="1">
                SSO<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/string/" class="tag-item tag-alphanumeric" data-count="1">
                String<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/tcp/" class="tag-item tag-alphanumeric" data-count="1">
                TCP<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/udp/" class="tag-item tag-alphanumeric" data-count="1">
                UDP<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/xbox360/" class="tag-item tag-alphanumeric" data-count="1">
                Xbox360<span class="tag-count">1</span>
            </a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            
            <a href="https://looechao.com/tags/%E5%88%B7%E9%A2%98/" class="tag-item tag-chinese" data-count="10">
                刷题<span class="tag-count">10</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E6%8A%80%E6%9C%AF/" class="tag-item tag-chinese" data-count="8">
                技术<span class="tag-count">8</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E7%94%9F%E6%B4%BB/" class="tag-item tag-chinese" data-count="8">
                生活<span class="tag-count">8</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E6%88%90%E9%95%BF/" class="tag-item tag-chinese" data-count="6">
                成长<span class="tag-count">6</span>
            </a>
            
            
            
            
            
            
            
            <a href="https://looechao.com/tags/%E6%9D%82%E8%B0%88/" class="tag-item tag-chinese" data-count="4">
                杂谈<span class="tag-count">4</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E6%95%B0%E7%A0%81/" class="tag-item tag-chinese" data-count="3">
                数码<span class="tag-count">3</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E7%AC%94%E8%AE%B0/" class="tag-item tag-chinese" data-count="3">
                笔记<span class="tag-count">3</span>
            </a>
            
            
            
            
            
            
            
            <a href="https://looechao.com/tags/%E6%84%9F%E6%82%9F/" class="tag-item tag-chinese" data-count="2">
                感悟<span class="tag-count">2</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="tag-item tag-chinese" data-count="2">
                网络编程<span class="tag-count">2</span>
            </a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a href="https://looechao.com/tags/%E4%B9%90%E8%A7%82%E4%B8%BB%E4%B9%89/" class="tag-item tag-chinese" data-count="1">
                乐观主义<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6/" class="tag-item tag-chinese" data-count="1">
                位运算符<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%81%A5%E5%BA%B7/" class="tag-item tag-chinese" data-count="1">
                健康<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%86%85%E5%8D%B7/" class="tag-item tag-chinese" data-count="1">
                内卷<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%88%86%E6%9E%90/" class="tag-item tag-chinese" data-count="1">
                分析<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%8C%BB%E7%96%97/" class="tag-item tag-chinese" data-count="1">
                医疗<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%8D%B3%E6%97%B6%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F/" class="tag-item tag-chinese" data-count="1">
                即时通信系统<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%93%B2%E7%90%86/" class="tag-item tag-chinese" data-count="1">
                哲理<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%B7%A5%E5%85%B7/" class="tag-item tag-chinese" data-count="1">
                工具<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" class="tag-item tag-chinese" data-count="1">
                年度总结<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E6%88%90%E5%B0%B1/" class="tag-item tag-chinese" data-count="1">
                成就<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E6%9E%81%E7%AE%80%E4%B8%BB%E4%B9%89/" class="tag-item tag-chinese" data-count="1">
                极简主义<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E6%B5%B7%E9%87%8F%E8%BF%9E%E6%8E%A5%E5%A4%84%E7%90%86/" class="tag-item tag-chinese" data-count="1">
                海量连接处理<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E6%B6%88%E8%B4%B9%E4%B8%BB%E4%B9%89%E9%99%B7%E9%98%B1/" class="tag-item tag-chinese" data-count="1">
                消费主义陷阱<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E7%A6%85/" class="tag-item tag-chinese" data-count="1">
                禅<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E7%AE%97%E6%B3%95/" class="tag-item tag-chinese" data-count="1">
                算法<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E8%82%96%E6%B4%AA%E6%B6%9B/" class="tag-item tag-chinese" data-count="1">
                肖洪涛<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E8%A7%82%E5%AF%9F/" class="tag-item tag-chinese" data-count="1">
                观察<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E8%A7%84%E5%88%92/" class="tag-item tag-chinese" data-count="1">
                规划<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E8%B7%A8%E5%B9%B4/" class="tag-item tag-chinese" data-count="1">
                跨年<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E8%BD%AC%E8%BD%BD/" class="tag-item tag-chinese" data-count="1">
                转载<span class="tag-count">1</span>
            </a>
            
            
            
            <a href="https://looechao.com/tags/%E9%98%85%E8%AF%BB/" class="tag-item tag-chinese" data-count="1">
                阅读<span class="tag-count">1</span>
            </a>
            
            
        </div>
    </div>
    
    
</div>
        </aside>
        <div class="site-middle">
            <main class="site-content">
                
<article class="single-article">
    <div class="article-header">
        <h1 class="article-title">Linux学习笔记-24年5月第一组</h1>
        <div class="article-meta">
            <time class="article-date">May 18, 2024</time>
            
            <div class="article-tags">
                
                <a href="/tags/%E6%8A%80%E6%9C%AF" class="article-tag">技术</a>
                
                <a href="/tags/linux" class="article-tag">Linux</a>
                
            </div>
            
        </div>
    </div>

    <div class="article-content">
        <h1 id="推荐书籍">推荐书籍</h1>
<p>the linux command line</p>
<p>linux 系统编程</p>
<p>linux 系统编程接口</p>
<p>APUE</p>
<p>操作系统导论 - 深入理解操作系统</p>
<h1 id="常用命令">常用命令</h1>
<h2 id="vim">Vim</h2>
<p>Vim是一种多模式的编辑器</p>
<ul>
<li>
<p>Normal（命令模式）</p>
<table>
  <thead>
      <tr>
          <th>命令类型</th>
          <th>效果</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>短命令</td>
          <td>直接敲</td>
      </tr>
      <tr>
          <td>底部命令</td>
          <td>冒号开头，enter结尾</td>
      </tr>
      <tr>
          <td>motion(移动光标)</td>
          <td>h j k l [n]- [n]G gg 0 ^ $ w/W b/B t/T f/F</td>
      </tr>
      <tr>
          <td>text object</td>
          <td></td>
      </tr>
      <tr>
          <td>action</td>
          <td></td>
      </tr>
      <tr>
          <td>组合</td>
          <td>action+textobject  <br />action+motion</td>
      </tr>
      <tr>
          <td>撤销和恢复</td>
          <td>u（u for undo）<br />[ctrl] + r<br />类比入栈和出栈</td>
      </tr>
      <tr>
          <td>粘贴</td>
          <td>p/P</td>
      </tr>
      <tr>
          <td>查找文本</td>
          <td>/pattern 向下查找<br />?pattern 向上查找<br />搭配使用 n/N 移动光标</td>
      </tr>
      <tr>
          <td>替换</td>
          <td>substitute<br />:s/pattern/replace             替换所在行的第一个匹配项<br />:s/pattern/replace/g         替换所在行的所有匹配项<br />:m,n s/pattern/replace/g 限定范围[m,n]<br />:% s/pattern/replace/g     全文替换</td>
      </tr>
  </tbody>
</table>
<p>motion:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">h j k l <span class="o">[</span>n<span class="o">]</span>- <span class="o">[</span>n<span class="o">]</span>G gg <span class="m">0</span> ^ $ w/W b/B t/T
</span></span></code></pre></div><p>text object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">d
</span></span><span class="line"><span class="cl">y
</span></span><span class="line"><span class="cl">c<span class="o">(</span>c <span class="k">for</span> change, 删除并进入到编辑模式<span class="o">)</span>
</span></span></code></pre></div></li>
<li>
<p>Insert（编辑文本）</p>
<ul>
<li>i 光标前 I 行前 a A o O 区分</li>
</ul>
</li>
<li>
<p>Visual / V-Block （行选/竖选）</p>
<ul>
<li>v 行选Visual</li>
<li>[ctrl] + v 竖选V-Block</li>
<li>批量注释
<ul>
<li>进入到竖选模式 [ctrl] + v</li>
<li>选择范围</li>
<li>在行首插入 I</li>
<li>按ESC完成注释</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="基本操作">基本操作</h3>
<p>移动(motion)</p>
<table>
  <thead>
      <tr>
          <th>按键</th>
          <th>操作</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>O</td>
          <td>行首</td>
      </tr>
      <tr>
          <td>$</td>
          <td>行尾</td>
      </tr>
      <tr>
          <td>w(word)</td>
          <td>下一个词首</td>
      </tr>
      <tr>
          <td>b(before)</td>
          <td>上一个词首</td>
      </tr>
  </tbody>
</table>
<p>动作(action)</p>
<table>
  <thead>
      <tr>
          <th>按键</th>
          <th>操作</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>d</td>
          <td>delete</td>
      </tr>
      <tr>
          <td>y</td>
          <td>yank</td>
      </tr>
      <tr>
          <td>c(change)</td>
          <td>删除并进入插入模式</td>
      </tr>
  </tbody>
</table>
<p>组合操作：action+motion</p>
<p>撤销恢复和删除</p>
<p>查找</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">/pattern    向下查找 n下一个匹配项  N 上一个匹配项
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">?pattern    向上查找
</span></span></code></pre></div><p>替换</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">:s/pattern/replace/g
</span></span><span class="line"><span class="cl">:5,100s/pattern/replace/g   指定范围进行替换
</span></span><span class="line"><span class="cl">:%s/pattern/replace/g    全文替换
</span></span></code></pre></div><p>多窗口</p>
<table>
  <thead>
      <tr>
          <th>类型</th>
          <th>操作</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>水平分割</td>
          <td>:split /:sp :new</td>
      </tr>
      <tr>
          <td>垂直分割</td>
          <td>:/vsplit /:vsp :vnew</td>
      </tr>
      <tr>
          <td>切换窗口</td>
          <td>[ctrl]+ww</td>
      </tr>
      <tr>
          <td>退出窗口</td>
          <td>:q :only :qa</td>
      </tr>
      <tr>
          <td>保存</td>
          <td>:W :wa</td>
      </tr>
  </tbody>
</table>
<h2 id="linux">Linux</h2>
<h3 id="体系结构">体系结构</h3>
<ul>
<li>
<p>内核（kernal）</p>
<ul>
<li>管理硬件资源
<ul>
<li>CPU -&gt; 进程调度模块</li>
<li>内存 -&gt; 内存管理模块</li>
<li>外部设备 -&gt; 文件管理，网络通信，设备驱动</li>
</ul>
</li>
<li>对上层应用程序提供接口-&gt;系统调用</li>
</ul>
</li>
<li>
<p>系统调用（system calls）</p>
<ul>
<li>内核给上层应用程序提供的接口</li>
</ul>
</li>
<li>
<p>库函数（library functions）</p>
<ul>
<li>
<p>对系统调用的包装</p>
<table>
  <thead>
      <tr>
          <th>给用户的接口</th>
          <th>包装的系统调用</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>malloc</td>
          <td>sbrk</td>
      </tr>
      <tr>
          <td>printf</td>
          <td>write</td>
      </tr>
  </tbody>
</table>
<p>不同系统相同功能的系统调用是不同的，封装包装好系统调用有以下优点</p>
<ul>
<li>方便使用</li>
<li>可移植</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="linux用户">Linux用户</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: center">用户类型</th>
          <th style="text-align: center">权限</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">root</td>
          <td style="text-align: center">超级用户，（皇帝，拥有至高无上的权限）</td>
      </tr>
      <tr>
          <td style="text-align: center">sudoers</td>
          <td style="text-align: center">管理员用户，（太监，可以用sudo临时提高权限）</td>
      </tr>
      <tr>
          <td style="text-align: center">普通用户</td>
          <td style="text-align: center">平民</td>
      </tr>
  </tbody>
</table>
<ul>
<li>
<p>创建用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd
</span></span></code></pre></div></li>
<li>
<p>删除用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">userdel
</span></span></code></pre></div></li>
<li>
<p>修改用户密码</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">passwd
</span></span></code></pre></div></li>
<li>
<p>切换用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su
</span></span></code></pre></div></li>
<li>
<p>退出切换</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">exit</span>
</span></span></code></pre></div></li>
<li>
<p>查看所用用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo cat /etc/passwd
</span></span></code></pre></div></li>
<li>
<p>添加用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd <span class="o">[</span>options<span class="o">]</span> username
</span></span></code></pre></div></li>
</ul>
<h2 id="文件子系统">文件子系统</h2>
<p>Windows以程序划分文件，而Linux是按照功能划分文件位置，分门别类的管理</p>
<table>
  <thead>
      <tr>
          <th>目录名</th>
          <th>功能</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>/bin(binary)</td>
          <td>存放可执行文件</td>
      </tr>
      <tr>
          <td>/sys(system)</td>
          <td>存放系统文件</td>
      </tr>
      <tr>
          <td>/dev(device)</td>
          <td>设备文件</td>
      </tr>
      <tr>
          <td>/etc</td>
          <td>配置文件（passwd放用户信息/shadow存放密码）</td>
      </tr>
      <tr>
          <td>/lib(library)</td>
          <td>库文件</td>
      </tr>
      <tr>
          <td>/var(variable)</td>
          <td>日志文件等会发生变化的文件</td>
      </tr>
      <tr>
          <td>/proc(process)</td>
          <td>进程文件</td>
      </tr>
      <tr>
          <td>/root</td>
          <td>根目录</td>
      </tr>
      <tr>
          <td>/home(username)</td>
          <td>普通用户的家目录</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>                      /                              <span class="o">]</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> <span class="o">[</span>bin<span class="o">]</span>   <span class="o">[</span>sys<span class="o">]</span> <span class="o">[</span>dev<span class="o">]</span>  <span class="o">[</span>etc<span class="o">]</span>  <span class="o">[</span>lib<span class="o">]</span>  <span class="o">[</span>var<span class="o">]</span>  <span class="o">[</span>root<span class="o">]</span> <span class="o">[</span>home<span class="o">]</span>   
</span></span><span class="line"><span class="cl">                        /   <span class="se">\ </span>                       <span class="p">|</span>
</span></span><span class="line"><span class="cl">                       /     <span class="se">\ </span>                      <span class="p">|</span>
</span></span><span class="line"><span class="cl">                   <span class="o">[</span>passwd<span class="o">]</span>  <span class="o">[</span>shadow<span class="o">]</span>             <span class="o">[</span>a.txt<span class="o">]</span> -&gt; inode -&gt; 物理地址
</span></span><span class="line"><span class="cl">                    
</span></span></code></pre></div><h3 id="通配符">通配符</h3>
<p>通配符（wildcard character）: <strong>用于匹配文件名字</strong>，注意与正则表达式的区别，正则表达式是用于匹配文件内容的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">*: 匹配任意多个字符，包括0个
</span></span><span class="line"><span class="cl">?: 匹配任意一个字符
</span></span><span class="line"><span class="cl">集合（类）: 
</span></span><span class="line"><span class="cl"><span class="o">[</span> characters<span class="o">]</span> 匹配集合内任意一个字符
</span></span><span class="line"><span class="cl"><span class="o">[</span>!characters<span class="o">]</span> 匹配集合外任意一个字符
</span></span><span class="line"><span class="cl"><span class="o">[</span>abc<span class="o">]</span> <span class="o">[</span>!abc<span class="o">]</span> <span class="o">[</span>0-9<span class="o">]</span> <span class="o">[</span>a-z<span class="o">]</span> <span class="o">[</span>A-z<span class="o">]</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ tree
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">├── dira
</span></span><span class="line"><span class="cl">├── diraaa
</span></span><span class="line"><span class="cl">├── dirb
</span></span><span class="line"><span class="cl">├── dirbbb
</span></span><span class="line"><span class="cl">├── dirc
</span></span><span class="line"><span class="cl">├── dirccc
</span></span><span class="line"><span class="cl">├── dirxxx
</span></span><span class="line"><span class="cl">├── diryyy
</span></span><span class="line"><span class="cl">└── dirzzz
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">10</span> directories, <span class="m">0</span> files
</span></span><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ rmdir dir*
</span></span><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ tree
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora linux02<span class="o">]</span>$ 
</span></span></code></pre></div><ul>
<li>匹配任意多个字符</li>
<li>匹配任意一个字符</li>
</ul>
<h3 id="ls命令">ls命令</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: center">常用选项</th>
          <th style="text-align: center">作用</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">list -i</td>
          <td style="text-align: center">显示inode编号，inode是物理文件的唯一标识</td>
      </tr>
      <tr>
          <td style="text-align: center">list -l</td>
          <td style="text-align: center">long format，用长格式显示每个目录的内容</td>
      </tr>
      <tr>
          <td style="text-align: center">list -h</td>
          <td style="text-align: center">常和-l一起使用，以人类可读的方式显示文件的大小</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>looechao@fedora ~<span class="o">]</span>$ ls -l
</span></span><span class="line"><span class="cl">总计 <span class="m">0</span>
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 公共
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 模板
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao  <span class="m">12</span>  4月26日 18:56 视频
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao  <span class="m">12</span>  4月26日 18:56 图片
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 文档
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao <span class="m">324</span>  5月13日 14:19 下载
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 音乐
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">1</span> looechao looechao   <span class="m">0</span>  4月25日 14:33 桌面
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">第一个字符文件类型
</span></span><span class="line"><span class="cl">    -: 普通文件  d<span class="o">(</span>dir<span class="o">)</span>:目录  c<span class="o">(</span>character<span class="o">)</span>:字符设备文件，键盘屏幕 b<span class="o">(</span>block<span class="o">)</span>: 块设备文件（磁盘 u盘）
</span></span><span class="line"><span class="cl">    p<span class="o">(</span>pipe<span class="o">)</span>: 有名管道  -s<span class="o">(</span>socket<span class="o">)</span>:本地套接字  -l<span class="o">(</span>link<span class="o">)</span>:符号链接
</span></span><span class="line"><span class="cl">剩余的九个字符：权限
</span></span><span class="line"><span class="cl">    文件拥有者usr:rw-
</span></span><span class="line"><span class="cl">    文件所有组group:rw-
</span></span><span class="line"><span class="cl">    其他人others: r--
</span></span></code></pre></div><h3 id="创建目录">创建目录</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p  创建目录
</span></span><span class="line"><span class="cl">rmdir -p  删除目录
</span></span><span class="line"><span class="cl">打印当前目录
</span></span><span class="line"><span class="cl"><span class="nb">pwd</span>
</span></span><span class="line"><span class="cl">切换当前目录
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> - . / ~  上一次目录保存在OLDPWD环境变量中
</span></span><span class="line"><span class="cl">复制
</span></span><span class="line"><span class="cl">cp src dst 复制文件
</span></span><span class="line"><span class="cl">cp -r src dst 递归复制目录
</span></span><span class="line"><span class="cl">cp src .. srcn dst 将多个文件复制到某个目录下
</span></span><span class="line"><span class="cl">cp -n 不抢夺
</span></span><span class="line"><span class="cl">cp -i 交互式方式询问
</span></span></code></pre></div><h3 id="mv命令">mv命令</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mv text1 text2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>text1<span class="o">]</span>   <span class="o">[</span>text2<span class="o">]</span>                <span class="o">[</span>text2<span class="o">]</span>
</span></span><span class="line"><span class="cl">   <span class="se">\ </span>     /             -&gt;          <span class="p">|</span>
</span></span><span class="line"><span class="cl">   <span class="o">[</span>inode<span class="o">]</span>                       <span class="o">[</span>inode<span class="o">]</span>
</span></span><span class="line"><span class="cl">  
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mv text1 dir
</span></span></code></pre></div><h3 id="别名">别名</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nb">cd</span> <span class="o">=</span> <span class="s1">&#39;rm -rf&#39;</span>
</span></span></code></pre></div><h3 id="创建文件">创建文件</h3>
<ul>
<li>
<p>创建空文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">touch
</span></span></code></pre></div></li>
<li>
<p>创建文件并输入简短的内容</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span>
</span></span></code></pre></div></li>
<li>
<p>编辑文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim
</span></span></code></pre></div></li>
</ul>
<h3 id="查找">查找</h3>
<p>find命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">find . -empty   找到空的文件和文件夹
</span></span><span class="line"><span class="cl">find . -user root 根据用户名称进行查找
</span></span><span class="line"><span class="cl">find . -uid root  根据用户id进行查找
</span></span><span class="line"><span class="cl">find . -perm <span class="m">775</span> 读写执行 读执行 根据权限查找
</span></span></code></pre></div><p>关于时间</p>
<ul>
<li>a(access) 文件访问时间</li>
<li>c(change) 文件属性发生改变的时间</li>
<li>m(modigy) 文件内容发生改变的时间</li>
<li>min 以分钟为单位</li>
<li>time 以天为单位</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">find . -mtime <span class="m">1</span>
</span></span><span class="line"><span class="cl">find . -mmin <span class="m">2</span>
</span></span><span class="line"><span class="cl">find . -mmin +2
</span></span><span class="line"><span class="cl">find . -mtime <span class="m">1</span> 一到两天内发生过内容修改的文件
</span></span></code></pre></div><p>组合查找</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">find /dev -type c -a -name <span class="s2">&#34;tty*&#34;</span>
</span></span><span class="line"><span class="cl">find /dev -type b -o -name <span class="s2">&#34;tty*&#34;</span>
</span></span><span class="line"><span class="cl">find /dev -type c -a !-name <span class="s2">&#34;tty*&#34;</span>
</span></span></code></pre></div><h3 id="查看">查看</h3>
<p>cat 和 head</p>
<pre tabindex="0"><code>head -n 5 bible
tail -n +5 bible
</code></pre><p>less 单页浏览文件</p>
<pre tabindex="0"><code>less bible
</code></pre><h3 id="重定向">重定向</h3>
<table>
  <thead>
      <tr>
          <th>标准流</th>
          <th>文件描述符</th>
          <th>重定向符号</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>stdin</td>
          <td>0</td>
          <td>&lt;</td>
      </tr>
      <tr>
          <td>stdout</td>
          <td>1</td>
          <td>&gt;和&raquo;</td>
      </tr>
      <tr>
          <td>stderr</td>
          <td>2</td>
          <td>2&gt;或2&raquo;</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> &gt; 覆盖重定向
</span></span><span class="line"><span class="cl">&gt;&gt; 追加重定向
</span></span><span class="line"><span class="cl"><span class="o">[</span>ctrl<span class="o">]</span> + D 输入EOF
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wc users   
</span></span><span class="line"><span class="cl">          键盘 stdin-<span class="o">[</span>程序<span class="o">]</span> 
</span></span><span class="line"><span class="cl">                    /  
</span></span><span class="line"><span class="cl">          文件  <span class="o">[</span>  <span class="o">]</span>
</span></span><span class="line"><span class="cl">wc &lt; users
</span></span></code></pre></div><h3 id="grep">grep</h3>
<p>用于搜索文件内容 globally search for a regular expression, 如果文件中某一行匹配指定的正则表达式，grep命令会显示这一行</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grep -E 使用拓展的正则表达式
</span></span><span class="line"><span class="cl">grep -i ignore忽略大小写
</span></span><span class="line"><span class="cl">grep -v --invert-match显示不匹配正则表达式的行
</span></span><span class="line"><span class="cl">grep -c 统计包含查找值的行数
</span></span></code></pre></div><h3 id="正则表达式">正则表达式</h3>
<ol>
<li>
<p>基本单位</p>
<ul>
<li>字符</li>
<li>转义字符</li>
<li>集合</li>
</ul>
</li>
<li>
<p>基本操作</p>
<p>操作对象是基本单位</p>
<ul>
<li>
<p>连接:</p>
<table>
  <thead>
      <tr>
          <th>操作</th>
          <th>效果</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ab</td>
          <td>ab</td>
      </tr>
      <tr>
          <td>[abc]x</td>
          <td>ax bx cx</td>
      </tr>
      <tr>
          <td>.txt</td>
          <td>atxt btxt</td>
      </tr>
  </tbody>
</table>
</li>
<li>
<p>重复:</p>
<p>指前面的基本单位重复的次数</p>
<ul>
<li>‘+’ 重复至少一次     &ldquo;[abc]+&rdquo; &ldquo;abc+&rdquo; &ldquo;(abc)+&rdquo;</li>
<li>‘？’重复零次或一次 &ldquo;abc?&rdquo; &ldquo;[abc]?&rdquo; &ldquo;(abc)?&rdquo;</li>
<li>‘*’  重复任意次数</li>
</ul>
</li>
<li>
<p>指定基本位置</p>
</li>
</ul>
</li>
</ol>
<h2 id="命令组合">命令组合</h2>
<ol>
<li>
<p>cmd1; cmd2</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@fedora:/home/looechao# mkdir linux03<span class="p">;</span> <span class="nb">cd</span> linux03
</span></span><span class="line"><span class="cl">root@fedora:/home/looechao/linux03# 
</span></span></code></pre></div></li>
<li>
<p>cmd1 | cmd2</p>
<p>管道，pipe, 用history 的输出输入到wc -l 这个程序中</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@fedora:/home/looechao/cpp58# <span class="nb">history</span> <span class="p">|</span> wc -l
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">  cmd <span class="m">1</span>               cmd2
</span></span><span class="line"><span class="cl"><span class="o">[</span> stdout <span class="o">]</span>-&gt;<span class="o">[</span>管道<span class="o">]</span>-&gt;<span class="o">[</span> stdin xargs<span class="o">[]</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">              ^
</span></span><span class="line"><span class="cl">              <span class="p">|</span>
</span></span><span class="line"><span class="cl">     内存，由内核管理的数据结构  
</span></span></code></pre></div></li>
<li>
<p>cmd1 | xargs cmd2</p>
<p>将cmd1输出的每一行作为cmd2的命令行参数</p>
</li>
</ol>
<h2 id="文件的权限">文件的权限</h2>
<table>
  <thead>
      <tr>
          <th>类型</th>
          <th>权限</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>r</td>
          <td>可读</td>
      </tr>
      <tr>
          <td>w</td>
          <td>可写</td>
      </tr>
      <tr>
          <td>x</td>
          <td>可执行</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/env python                                              sharp bang shebang 脚本文件的解释器       </span>
</span></span></code></pre></div><p>增加可执行权限</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@fedora:/home/looechao/coding# chmod +x hello.py
</span></span><span class="line"><span class="cl">root@fedora:/home/looechao/coding# ./hello.py
</span></span><span class="line"><span class="cl">hello world
</span></span></code></pre></div><p>关于目录项</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> 目录项（directory entry: direct）
</span></span><span class="line"><span class="cl">   <span class="p">|</span>
</span></span><span class="line"><span class="cl">  <span class="o">[</span>.<span class="o">]</span>-&gt;<span class="o">[</span>a.txt<span class="o">]</span>-&gt;<span class="o">[</span>text<span class="o">]</span>-&gt;<span class="o">[</span>..<span class="o">]</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">       <span class="o">[</span>      library        <span class="o">]</span>
</span></span><span class="line"><span class="cl">       /     /    <span class="p">|</span>      <span class="se">\ </span>   <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">[</span>dir<span class="o">]</span> <span class="o">[</span>.<span class="o">]</span>  <span class="o">[</span>a.txt<span class="o">]</span> <span class="o">[</span>text<span class="o">]</span> <span class="o">[</span>..<span class="o">]</span>
</span></span><span class="line"><span class="cl">   /  <span class="p">|</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  a   b   c
</span></span></code></pre></div><table>
  <thead>
      <tr>
          <th>目录文件的权限</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>r</td>
          <td>ls tree</td>
      </tr>
      <tr>
          <td>w</td>
          <td>删除目录项，添加目录项</td>
      </tr>
      <tr>
          <td>x</td>
          <td>最基本的权限(cd, ls , w ,r)</td>
      </tr>
  </tbody>
</table>
<h3 id="chmod-命令">chmod 命令</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ chmod o+w text1   为其他人添加写权限
</span></span><span class="line"><span class="cl">$ chmod <span class="nv">u</span><span class="o">=</span>rwx,g<span class="o">=</span>rx,o<span class="o">=</span>r text1
</span></span><span class="line"><span class="cl">$ chmod <span class="m">664</span> text1 数字设定法
</span></span></code></pre></div><h3 id="文件创建掩码">文件创建掩码</h3>
<p>umask ：u for unix</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">umask</span> <span class="m">0023</span>
</span></span></code></pre></div><h2 id="符号链接">符号链接</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ln -s text1 link
</span></span></code></pre></div><p>删除命令不会更改链接指向的值</p>
<p>如果创建的链接是指向空目录的时候，就会产生一个悬空链接，类似于C语言当中的野指针</p>
<h2 id="远程控制">远程控制</h2>
<p>scp: secure copy （基于SSH协议）， 进行远程复制（上传和下载），上传即将本地数值远程复制到远程，下载即将远程数据复制到本地</p>
<ul>
<li><strong>本地路径</strong>：
<ul>
<li>绝对路径：</li>
<li>相对路径：</li>
</ul>
</li>
<li><strong>远程路径</strong>
<ul>
<li>用户名(远程机器的用户名)@IP:绝对路径</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ scp 
</span></span></code></pre></div><h2 id="打包">打包</h2>
<p>tar: text archieve</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar c  创建
</span></span><span class="line"><span class="cl">tar r  追加
</span></span><span class="line"><span class="cl">tar x  释放
</span></span><span class="line"><span class="cl">tar t  查看
</span></span><span class="line"><span class="cl">tar f  指定文件的名称
</span></span><span class="line"><span class="cl">tar v  verbose 详细信息
</span></span><span class="line"><span class="cl">tar z  使用zip算法压缩或者解压缩文件
</span></span></code></pre></div><pre tabindex="0"><code>tar czvf create zip verbose 命名.tar.gz
</code></pre><h1 id="编译工具链">编译工具链</h1>
<p>对应集成开发环境(IDE)，又叫SDK（Software Development Kit）</p>
<p>过程</p>
<table>
  <thead>
      <tr>
          <th>过程</th>
          <th>生成文件</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>gcc -E</td>
          <td>预处理后文件(*.i)</td>
      </tr>
      <tr>
          <td>gcc -S</td>
          <td>汇编代码(*.s)</td>
      </tr>
      <tr>
          <td>gcc -C</td>
          <td>目标文件(*.o)</td>
      </tr>
      <tr>
          <td>无</td>
          <td>可执行程序</td>
      </tr>
      <tr>
          <td>gcc -l$</td>
          <td>链接&amp;{lib}库</td>
      </tr>
      <tr>
          <td>gcc -Wall</td>
          <td>警告消息</td>
      </tr>
      <tr>
          <td>gcc -g</td>
          <td>补充调试信息</td>
      </tr>
      <tr>
          <td>gcc -O1 -O2 -O3</td>
          <td>指定优化级别</td>
      </tr>
      <tr>
          <td>gcc -D${macro}</td>
          <td>#define &amp;{macro}定义宏</td>
      </tr>
      <tr>
          <td>gcc -D${macro} = ${value}</td>
          <td>#define &amp;{macro} ${value}</td>
      </tr>
      <tr>
          <td>gcc -l${dir}</td>
          <td>#include&lt;&gt;${dir} -&gt; 系统的include目录下搜索<br />#include&quot; &ldquo;${dir} -&gt; 当前工作目录下搜索</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ gcc -E 预处理 
</span></span><span class="line"><span class="cl">$ gcc -S 汇编 -&gt; 汇编代码
</span></span><span class="line"><span class="cl">$ gcc -c 目标文件 compiled生成 hello.o
</span></span><span class="line"><span class="cl">$ gcc 生成可执行程序
</span></span><span class="line"><span class="cl">$ gcc -wall warning all
</span></span><span class="line"><span class="cl">$ gcc -o0 -o1 -o2 -o3
</span></span><span class="line"><span class="cl">       ^     ^
</span></span><span class="line"><span class="cl">       <span class="p">|</span> <span class="o">[</span>生产阶段<span class="o">]</span> 
</span></span><span class="line"><span class="cl">$ gcc -g 生成调试信息
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ Dmacro: 在文件开头 <span class="c1">#define macro</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ gcc -E main.c -o main.i DEBUG  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">rm main.<span class="o">[</span>^c<span class="o">]</span>  一处所有.c 之外的文件 
</span></span><span class="line"><span class="cl">rm main 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;func.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef MAXSIZE
</span></span></span><span class="line"><span class="cl"><span class="cp">#define MAXSIZE 4096
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="n">MAXSIZE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="cp">#ifdef DEBUG
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="nf">printf</span><span class="p">(</span><span class="s">&#34;i = %d&#34;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="条件编译">条件编译</h2>
<p>作用：在预处理阶段决定包含哪些代码块，不包含哪些代码块</p>
<p>方法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#if  ... #elif ... #else ... #endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#ifdef ... #endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#ifndef ... #endif
</span></span></span></code></pre></div><p>应用场景：</p>
<ul>
<li>编写可以指的代码</li>
<li>给宏提供默认值</li>
<li>调试程序</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define DEBUG 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="gdb-调试">gdb 调试</h2>
<ul>
<li>
<p>调试往往更难</p>
</li>
<li>
<p>调试程序流程</p>
<ul>
<li>
<p>走走</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> run/n
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="k">continue</span>/n
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> next/n
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> step/s
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> finish/f  回到主调函数
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> ignore<span class="o">(</span>NUM<span class="o">)</span> 忽略断点NUM次,调试循环时非常有用
</span></span></code></pre></div></li>
<li>
<p>停停</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> break/b
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> delete/s
</span></span></code></pre></div></li>
<li>
<p>看看（观察是否和预期一致）</p>
<ul>
<li>预期错了，说明快找到原因了</li>
<li>程序错了，表明提出线索</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> print/p
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> display/EXPR
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info display
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> undisplay
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info locals
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info args
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info registers
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-BASH" data-lang="BASH"><span class="line"><span class="cl"><span class="nv">$gdb</span> main
</span></span><span class="line"><span class="cl"><span class="nv">$gcc</span> main.c -o main -g   编译必须要加g
</span></span><span class="line"><span class="cl"><span class="nv">$gdb</span> main aaa bbb ccc 
</span></span><span class="line"><span class="cl">      <span class="p">|</span>   命令行参数
</span></span><span class="line"><span class="cl">  executable
</span></span><span class="line"><span class="cl">  
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> quit //退出
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> run<span class="o">(</span>r<span class="o">)</span>  //跑程序
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">set</span> args aaa bbb ccc //设置命令行参数
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> list  //显示代码，默认10行
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> break<span class="o">(</span>b<span class="o">)</span>  //设置断点 
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> <span class="m">14</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> main.c :14
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> foo  //指定函数的名字
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> main.c:foo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info <span class="nb">break</span> //停一停程序
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> delete <span class="m">1</span> //删除断点1
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> delete //会询问是否删除所有的断点
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> next<span class="o">(</span>n<span class="o">)</span>  //下一步下一行或者遇到函数会执行完整个函数调用
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> step //单步调试
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> finish // 执行完这次函数调用会回到被调函数
</span></span></code></pre></div><p><strong>常见用法</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> display r
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> display PI*r*r
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info display
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> undisplay
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> undisplay
</span></span></code></pre></div><p><strong>查看内存</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gcc main.c -o main -Wall -g
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> gdb main
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> <span class="m">11</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> r
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> x/nFU address
</span></span><span class="line"><span class="cl">  n个单元的内存 U表示内存单元
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> x/4db arr+5
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> x/4xb arr+5
</span></span></code></pre></div><p><strong>用gdb查看core文件</strong></p>
<ul>
<li>
<p>core文件</p>
<ul>
<li>概念：类比黑匣子，core文件是程序异常终止时的内存快照（包含一些堆、栈、寄存器信息）</li>
<li>功能：恢复场景，还原错误</li>
<li>方法：用gdb生成core文件</li>
</ul>
</li>
<li>
<p>生成core文件</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">查看系统是否允许生成coredump文件
</span></span><span class="line"><span class="cl">$ <span class="nb">ulimit</span> -a
</span></span><span class="line"><span class="cl">$ <span class="nb">ulimit</span> -c unlimited  将core文件的大小临时设置为不受限制
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">设置coredump文件的格式
</span></span><span class="line"><span class="cl">$ vim /etc/sysctl.conf
</span></span><span class="line"><span class="cl"> kernel.core_pattern <span class="o">=</span> %e_core_%s_%t executubal-name sigbal <span class="nb">time</span>
</span></span><span class="line"><span class="cl">$ sysctl -p  让配置生效
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> sysctl <span class="k">for</span> system control
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ gcc <span class="nb">test</span> .c -o <span class="nb">test</span> -g  注意-g补充调试信息
</span></span><span class="line"><span class="cl">$ ./test
</span></span><span class="line"><span class="cl">Floating point exception <span class="o">(</span>core dumped<span class="o">)</span>
</span></span></code></pre></div><ul>
<li>查看core文件</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">test</span> test_core_8_1715911762.2496
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> backtrace   或者 bt 打开栈帧的调试情况 结果显示从栈顶到栈底
</span></span><span class="line"><span class="cl"><span class="c1">#0  ···</span>
</span></span><span class="line"><span class="cl"> ·  ···
</span></span><span class="line"><span class="cl"><span class="c1">#3</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> frame3 查看栈帧
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info args 查看局部变量的值
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> info locals
</span></span><span class="line"><span class="cl"><span class="o">(</span>gdb<span class="o">)</span> 
</span></span></code></pre></div><h2 id="makefile原理">Makefile原理</h2>
<ul>
<li>
<p>Makefile</p>
<ul>
<li>
<p>makefile 是一个脚本文件，使用make工具可以解释执行makefile脚本文件</p>
</li>
<li>
<p>makefile 的优点</p>
<ul>
<li>自动编译</li>
<li>增量编译（只编译新增和修改过的.c文件）</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">a.c  -&gt; a.o
</span></span><span class="line"><span class="cl">b.c  -&gt; b.o   
</span></span><span class="line"><span class="cl">c.c  -&gt; b.o   -&gt; 链接生成 executable
</span></span><span class="line"><span class="cl">···            
</span></span><span class="line"><span class="cl">x.c  -&gt; x.o
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>书写方法</p>
<p>makefile对语法要求非常严格</p>
<p>algs.h</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef __WD_ALGS
</span></span></span><span class="line"><span class="cl"><span class="cp">#DEFINE __WD_ALGS
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">mul</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">dev</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span></code></pre></div><p>add.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>mul.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">mul</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>div.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">div</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>main.c</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;algs.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nf">mul</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Makefile</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nf">main</span><span class="o">:</span> <span class="n">main</span>.<span class="n">o</span>  <span class="n">add</span>.<span class="n">o</span> <span class="n">mul</span>.<span class="n">o</span> <span class="n">div</span>.<span class="n">o</span> <span class="c">##目标文件和依赖文件  
</span></span></span><span class="line"><span class="cl"><span class="c"></span>	gcc main.0 add.o sub.o mul.o div.o -o main  <span class="c1">##shell命令</span>
</span></span><span class="line"><span class="cl"><span class="c">## 目标和命令共同构成了规则
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c main.c -Wall -g
</span></span><span class="line"><span class="cl"><span class="nf">add.o</span><span class="o">:</span> <span class="n">add</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c add.c -Wall-g
</span></span><span class="line"><span class="cl"><span class="nf">sub.o</span><span class="o">:</span> <span class="n">mul</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c mul.c -wall-g
</span></span><span class="line"><span class="cl"><span class="nf">div.o</span><span class="o">:</span> <span class="n">div</span>.<span class="n">c</span> <span class="n">algs</span>.<span class="n">h</span>
</span></span><span class="line"><span class="cl">	gcc -c div.c -Wall-g
</span></span><span class="line"><span class="cl">	....
</span></span><span class="line"><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span> <span class="n">rebuild</span>
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	rm- rf *.o main
</span></span><span class="line"><span class="cl"><span class="nf">rebuild</span><span class="o">:</span> <span class="n">clean</span> <span class="n">main</span>
</span></span></code></pre></div></li>
<li>
<p>原理</p>
<ul>
<li>
<p>依赖关系: 一般使用有向无环图来表示（Directed Acyclic Graph, DAG）, make在执行脚本的时候，在内部会生成DAG，执行过程会用到DFS（深度优先遍历）</p>
<pre tabindex="0"><code class="language-bsah" data-lang="bsah">           main 
        /   |   \              
   main.o add.o sub.o  ···
    / \    | |  ···  ··· 
main.c \   |add.c 
       algs.h
</code></pre><p>通过拓扑排序可以保证有向无环图的依赖关系, 常常会用到DFS算法</p>
</li>
<li>
<p>伪目标：规则中的shell命令不一定要生成目标文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span>    <span class="c">##PHONY伪目标
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nf">clean</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">	rm-rf *.o main
</span></span></code></pre></div><p>如上规则，没有任何目标文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ make clean
</span></span></code></pre></div><p>这样的伪目标可以反复执行</p>
</li>
<li>
<p>什么情况下会执行命令？</p>
<ul>
<li>目标不存在</li>
<li>依赖比目标更新</li>
</ul>
</li>
</ul>
</li>
<li>
<p>效果</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ make
</span></span></code></pre></div><p>会有<strong>自动编译</strong>和<strong>增量编译</strong>的效果</p>
</li>
</ul>
<h2 id="库文件">库文件</h2>
<p>什么是库文件：库文件是目标文件(*.o)的集合</p>
<p>分类：</p>
<ul>
<li>
<p><strong>静态库</strong>：.lib .a 对函数的链接在连接阶段完成</p>
<p>优点：</p>
<ul>
<li>移植方便</li>
</ul>
<p>缺点</p>
<ul>
<li>
<p>浪费空间，每一个进程中都有静态库的一个副本</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>进程 .lib<span class="o">]</span>    <span class="o">[</span>进程  .lib<span class="o">]</span> 
</span></span></code></pre></div></li>
<li>
<p>对程序的更新，部署，发布不友好</p>
</li>
</ul>
</li>
<li>
<p><strong>动态库</strong>：.ddl  .so (dynamic link library) 在运行时完成对函数的链接</p>
<p>优点：</p>
<ul>
<li>
<p>可以共享</p>
</li>
<li>
<p>对程序更新，部署，发布友好</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>进程<span class="o">]</span>   <span class="o">[</span>进程<span class="o">]</span>
</span></span><span class="line"><span class="cl">     <span class="se">\ </span>  /
</span></span><span class="line"><span class="cl">     <span class="o">[</span>.so<span class="o">]</span>
</span></span></code></pre></div></li>
</ul>
<p>缺点</p>
<ul>
<li>不方便移植</li>
</ul>
</li>
</ul>
<p><strong>打包生成静态库的流程：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">args.h add.c  sub.c mul.c div.c  
</span></span><span class="line"><span class="cl">$ make
</span></span><span class="line"><span class="cl">或者
</span></span><span class="line"><span class="cl">$ gcc -c add.c sub.c mul.c div.c
</span></span><span class="line"><span class="cl">$ ar crsv libalgs.a add.o sub.o mul.o div.o   <span class="c1">##打包生成静态库</span>
</span></span><span class="line"><span class="cl">$ sudo mv libalgs.a /usr/lib
</span></span><span class="line"><span class="cl">$ mv * tmp/
</span></span><span class="line"><span class="cl">$ vim main.c
</span></span></code></pre></div><p>在main.c中使用</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#incldue &#34;algs.h&#34;
</span></span></span></code></pre></div><p><strong>打包生成动态库</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls 
</span></span><span class="line"><span class="cl">args.h add.c  sub.c mul.c div.c
</span></span><span class="line"><span class="cl">$ gcc -c *.c -fpic     
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">args.h add.c  sub.c mul.c div.c add.o  sub.o mul.o div.o
</span></span><span class="line"><span class="cl">$ gcc -shared add.o sub.o mul.o div.o -o libarlgs.so
</span></span><span class="line"><span class="cl">$ sudo mv libalgs.so /usr/lib  移动到系统的库目录下面去
</span></span><span class="line"><span class="cl">$ rm *.o
</span></span><span class="line"><span class="cl">$ gcc main.c -o main -lalgs
</span></span><span class="line"><span class="cl">$ ./main
</span></span><span class="line"><span class="cl">/usr/lib$ mv libalgs.so libalgs.so.0.0.1
</span></span><span class="line"><span class="cl">$ ./main 跑不通
</span></span></code></pre></div>
    </div>
</article>

                <footer>
    <p>&copy; 2025 <a href="https://looechao.com/" style="color: inherit; text-decoration: none;">looechao</a>. All rights reserved.</p>
</footer>
            </main>
            
<div class="comments-wrapper">
    <div id="gitalk-container" class="comments-section"></div>
</div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css">
<link rel="stylesheet" href="/css/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var gitalk = new Gitalk({
            clientID: '4fad9f9325f73f2c2891',
            clientSecret: '109ed02ced3608e776a41f87de4ef9986f5b5fd6',
            repo: 'hugo-comments',
            owner: 'looechao',
            admin: 'looechao',
            id: window.location.pathname,
            perPage: '50',
            pagerDirection: 'last',
            createIssueManually:  false ,
            distractionFreeMode:  false ,
            language: 'en-US'
        });
        gitalk.render('gitalk-container');
    });
</script>


        </div>
    </div>
</body>

</html>